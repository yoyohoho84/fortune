(this.webpackJsonpfortune=this.webpackJsonpfortune||[]).push([[0],{160:function(e,t,n){e.exports=n(253)},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){"use strict";n.r(t);n(161),n(187),n(189),n(190),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229);var a=n(0),o=n.n(a),c=n(89),r=n.n(c),l=n(18),i=n.n(l),s=n(17),u=n(3),m=(n(248),n(96)),p=n.n(m),d=n(97),f=n.n(d);var h=n(57),g=n.n(h),b=n(59),x=n(93),E=n(94),y=n(95),w=function(){function e(){Object(E.a)(this,e)}return Object(y.a)(e,null,[{key:"callMethod",value:function(){var t=Object(x.a)(g.a.mark((function t(n){var a,o,c=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},t.next=3,fetch("".concat(e.baseURL,"/").concat(n),{headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(b.a)(Object(b.a)({},a),{},{search:document.location.search})),method:"POST"});case 3:return o=t.sent,t.abrupt("return",o.json());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();w.baseURL="https://one-digitalspace.ru/twist/api";var j="https://sun9-40.userapi.com/2OpcaRTr0LoA2SGgN8fWhcvt_fm3iXwmf34f3Q/26Gcr6w9RQg.jpg",v=Number(new URLSearchParams(document.location.search).get("vk_user_id")),k=w.callMethod;function S(e,t,n,a){switch(e){case"app-notification":i.a.sendPromise("VKWebAppAllowNotifications").then((function(e){console.log("res",e)})).catch((function(e){console.log("err",e)}));break;case"story":!function(e,t){var n="https://vk.com/app".concat(7637811,"#").concat(v);i.a.sendPromise("VKWebAppShowStoryBox",{background_type:"image",url:"https://sun9-61.userapi.com/dt1EAGrTXKBJvGYIBRnvMXRqyved3Yw7x0ZCzg/cnIbVSGFOxo.jpg",attachment:{text:"go_to",type:"url",url:n}}).then((function(e){if(e.result)return k("story")})).then((function(n){!0===n.added?t("\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 1 \u0431\u043e\u043d\u0443\u0441\u043d\u0443\u044e \u043f\u043e\u043f\u044b\u0442\u043a\u0443"):t("\u0415\u0449\u0451 \u043e\u0434\u043d\u0443 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u0437\u0430 \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 ".concat(z(n.time))),e()}))}(a,t);break;case"share-wall":!function(e,t,n){e.preventDefault();"https://vk.com/app".concat(7637811,"#").concat(v);var a="".concat("photo-198555148_457239084",",https://vk.com/app").concat(7637811,"#").concat(v);i.a.send("VKWebAppShowWallPostBox",{message:"",attachments:a}).then((function(e){if(e.post_id>0)return k("wall")})).then((function(e){!0===e.added?n("\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 1 \u0431\u043e\u043d\u0443\u0441\u043d\u0443\u044e \u043f\u043e\u043f\u044b\u0442\u043a\u0443"):n("\u0415\u0449\u0451 \u043e\u0434\u043d\u0443 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u0437\u0430 \u0440\u0435\u043f\u043e\u0441\u0442 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 ".concat(z(e.time))),t()}))}(n,a,t)}}var O=function(e){var t=e.setActiveModal;e.addGroup,e.openModalSharing,e.referrals;return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.g,{activeModal:"modal-prize"},o.a.createElement(u.f,{id:"modal-prize",onClose:function(){t(null)},header:"\u041d\u0430\u0431\u043e\u0440 \u0441\u0442\u0438\u043a\u0435\u0440\u043e\u0432",icon:o.a.createElement(u.c,{size:72,src:j}),caption:o.a.createElement(o.a.Fragment,null,o.a.createElement(u.e,{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},o.a.createElement(u.e,null,'\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u0443\u043b\u0447\u0438\u0442\u044c \u043f\u0440\u0438\u0437, \u043d\u0430\u0436\u043c\u0438 \u043a\u043d\u043e\u043f\u043a\u0443 "\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0440\u0438\u0437"'),o.a.createElement(u.d,{size:"l",mode:"commerce",href:"https://vk.me/public199716716",target:"_blank",onClick:function(){},style:{color:"white",marginTop:"30px",width:"260px"}},o.a.createElement("span",{style:{fontSize:"17px"}}," \u041f\u043e\u0443\u043b\u0447\u0438\u0442\u044c \u043f\u0440\u0438\u0437"))))})))};var A,z=function(e){var t=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60),a=Math.floor(e/36e5%24);return n=n<10?"0"+n:n,t=t<10?"0"+t:t,"".concat(a=a<10?"0"+a:a,":").concat(n,":").concat(t)},C=n(58),T=n.n(C),M=w.callMethod,P=function(e){var t=e.id,n=(e.go,e.fetchedUser,e.snackbar),c=e.openAlert,r=e.openPopoutSharing,l=(e.allowMessages,e.attempts),m=e.timeToAttempt,p=e.getUser,d=e.openModal,f=Object(a.useState)(!1),h=Object(s.a)(f,2),g=(h[0],h[1],Object(a.useState)("")),b=Object(s.a)(g,2),x=b[0],E=b[1],y=["animationOne","animationTwo","animationThree","animationFour"],w=Object(a.useState)(m-Date.now()),j=Object(s.a)(w,2),v=j[0],k=j[1];return Object(a.useEffect)((function(){return A&&clearInterval(A),A=setInterval((function(){k(m-Date.now())}),1e3),function(){return clearInterval(A)}}),[m]),o.a.createElement(u.h,{id:t},o.a.createElement(u.e,{className:"imgPanelHome"},o.a.createElement(u.e,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"-100px",height:"100px"}},v>0?o.a.createElement(T.a,{top:!0,duration:3e3},o.a.createElement(u.e,{style:{fontSize:"15px",color:"white"}}," ","\u041e\u0421\u0422\u0410\u041b\u041e\u0421\u042c \u0414\u041e \u0421\u041b\u0415\u0414\u0423\u042e\u0429\u0415\u0419 \u041f\u041e\u041f\u042b\u0422\u041a\u0418:"," "),o.a.createElement(u.e,{style:{fontSize:"15px",color:"white",marginTop:"10px"}}," ",z(v)," ")):o.a.createElement(T.a,{top:!0,duration:3e3},o.a.createElement(u.e,{style:{fontSize:"15px",color:"white"}},"\u041f\u043e\u043f\u044b\u0442\u043a\u0438: ",l))),o.a.createElement(u.e,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"20px"}},o.a.createElement(u.e,{className:v>0?"imgPointer Attempts":"imgPointer"}),o.a.createElement(u.e,{className:"imgFortune ".concat(x)})),o.a.createElement(u.d,{size:"l",mode:"commerce",onClick:function(){!function(){var e=0,t=Math.floor(y.length),n=Math.floor(Math.random()*t);i.a.sendPromise("VKWebAppAllowMessagesFromGroup",{group_id:199716716}).then((function(e){if(!1!==e.status)return M("twist")})).then((function(t){!1===t.status?c("\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043a\u0440\u0443\u0442\u0438\u0442\u044c \u043a\u043e\u043b\u0435\u0441\u043e","red"):(e=y[n],console.log("res",n+1),console.log("a",e),E(y[n]),setTimeout((function(){d("prize")}),1e3*(n+4)),p())})).catch((function(e){return console.log("err",e),c("\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u0447\u0442\u043e\u0431\u044b \u043a\u0440\u0443\u0442\u0438\u0442\u044c \u043a\u043e\u043b\u0435\u0441\u043e \u0443\u0434\u0430\u0447\u0438","red")}))}()},style:{color:"white",marginTop:"30px",width:"260px"},disabled:Boolean(v>0)||0===l},o.a.createElement("span",{style:{fontSize:"17px"}}," \u041a\u0440\u0443\u0442\u0438\u0442\u044c \u043a\u043e\u043b\u0435\u0441\u043e")),o.a.createElement(u.d,{size:"l",mode:"overlay_primary",onClick:r,style:{marginTop:"15px",marginBottom:"40px",width:"260px"}},o.a.createElement("span",{style:{fontSize:"17px"}}," \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0438"))),n)},I=(n(88),function(e){var t=e.id,n=e.go,a=(e.fetchedUser,e.snackbar);e.openAlert;return o.a.createElement(u.h,{id:t},o.a.createElement(u.e,{className:"imgPanelHome AdditionalAttempts"},o.a.createElement(u.e,{style:{color:"white",fontSize:"30px",fontWeight:"bold",margin:"0px 0px 10px 0px"}},"\u041a\u041e\u041b\u0415\u0421\u041e \u0423\u0414\u0410\u0427\u0418"),o.a.createElement(u.e,{style:{width:"94%",background:"rgba(89, 76, 76, 0.5)",fontSize:"20px",margin:"0px 0px 20px 0px",padding:"20px",color:"white",borderRadius:"15px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},o.a.createElement(u.e,null,"\u041a\u0440\u0443\u0442\u0438 \u043a\u043e\u043b\u0435\u0441\u043e \u0443\u0434\u0430\u0447\u0438 \u0438 \u0432\u044b\u0438\u0433\u0440\u044b\u0432\u0430\u0439 \u043a\u0440\u0443\u0442\u044b\u0435 \u043f\u0440\u0438\u0437\u044b."),o.a.createElement(u.e,null,"\u041a\u0430\u0436\u0434\u044b\u0439 \u0434\u0435\u043d\u044c \u0442\u0435\u0431\u0435 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043e\u0434\u043d\u0430 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u0430\u044f \u043f\u043e\u043f\u044b\u0442\u043a\u0430.")),o.a.createElement(u.e,{className:"imgPointer AdditionalAttempts"}),o.a.createElement(u.e,{className:"imgFortune AdditionalAttempts animationInfinite"}),o.a.createElement(u.e,{style:{width:"94%",background:"rgba(89, 76, 76, 0.5)",fontSize:"20px",margin:"0px 0px 20px 0px",padding:"20px",color:"white",borderRadius:"15px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},o.a.createElement(u.e,null,"\u0417\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u0439 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0438, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044f \u043b\u0435\u0433\u043a\u0438\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f.")),o.a.createElement(u.e,{style:{color:"white",fontSize:"20px",fontWeight:"bold",margin:"0px 0px 10px 0px"}},"\u0414\u041e\u041f\u041e\u041b\u041d\u0418\u0422\u0415\u041b\u042c\u041d\u042b\u0415 \u041f\u041e\u041f\u042b\u0422\u041a\u0418"),o.a.createElement(u.d,{size:"l",onClick:n,"data-to":"additional-attempts",style:{backgroundColor:"white",color:"black",marginTop:"15px",width:"260px"}},o.a.createElement("span",{style:{fontSize:"17px"}}," \u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 +1")),o.a.createElement(u.d,{size:"l",onClick:n,"data-to":"additional-attempts",style:{backgroundColor:"white",color:"black",marginTop:"15px",width:"260px"}},o.a.createElement("span",{style:{fontSize:"17px"}}," \u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u0435\u043d\u0435 +1")),o.a.createElement(u.d,{size:"l",onClick:n,"data-to":"additional-attempts",style:{backgroundColor:"white",color:"black",marginTop:"15px",width:"260px"}},o.a.createElement("span",{style:{fontSize:"17px"}},"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f +1")),o.a.createElement(u.d,{size:"l",onClick:n,"data-to":"home",style:{backgroundColor:"green",color:"white",marginTop:"15px",width:"350px",height:"50px"}},o.a.createElement("span",{style:{fontSize:"25px"}},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))),a)}),N=function(e){var t=e.id,n=(e.go,e.fetchedUser,e.snackbar),c=e.openAlert,r=Object(a.useState)(!1),l=Object(s.a)(r,2),i=(l[0],l[1],Object(a.useState)("")),m=Object(s.a)(i,2),p=m[0],d=m[1],f=["animationOne","animationTwo","animationThree","animationFour"];return Object(a.useEffect)((function(){}),[]),o.a.createElement(u.h,{id:t},o.a.createElement(u.e,{className:"imgPanelHome"},o.a.createElement(u.e,{className:"imgPointer"}),o.a.createElement(u.e,{className:"imgFortune ".concat(p)}),o.a.createElement(u.d,{size:"l",onClick:function(){!function(){var e,t=Math.ceil(0),n=Math.floor(f.length-1),a=Math.floor(Math.random()*(n-0))+t;d(f[a]),setTimeout((function(){d("")}),1e3),e=f[a],console.log("res",a),console.log("a",e)}()},style:{backgroundColor:"green",color:"white",marginTop:"30px",width:"260px"}},o.a.createElement("span",{style:{fontSize:"17px"}}," \u041a\u0440\u0443\u0442\u0438\u0442\u044c \u043a\u043e\u043b\u0435\u0441\u043e")),o.a.createElement(u.d,{size:"l",onClick:function(){return c("\u041e\u0448\u0438\u0431\u043a\u0430 !","red")},style:{backgroundColor:"white",color:"black",marginTop:"15px",width:"260px"}},o.a.createElement("span",{style:{fontSize:"17px"}}," \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0438"))),n)},U=(n(251),n(252),w.callMethod),W=function(){var e=Object(a.useState)("home"),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),l=Object(s.a)(r,2),m=l[0],d=l[1],h=Object(a.useState)(null),g=Object(s.a)(h,2),b=g[0],x=(g[1],Object(a.useState)(null)),E=Object(s.a)(x,2),y=E[0],w=E[1],v=Object(a.useState)(null),k=Object(s.a)(v,2),A=k[0],C=k[1],T=Object(a.useState)(null),M=Object(s.a)(T,2),W=M[0],_=M[1],D=Object(a.useState)(0),F=Object(s.a)(D,2),V=F[0],G=F[1],K=Object(a.useState)(0),R=Object(s.a)(K,2),B=R[0],J=R[1],L=Object(a.useState)(),H=Object(s.a)(L,2),X=H[0],Q=H[1];Object(a.useEffect)((function(){i.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var o=document.createAttribute("scheme");o.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(o)}}))}),[]);var Y=function(){U("getUser").then((function(e){e.user&&(_(e.user.attempts),G(e.user.timeToStoryShare),J(e.user.timeToWallShare),Q(e.user.timeToAttempt))}))};function q(){i.a.send("VKWebAppJoinGroup",{group_id:199716716}).then((function(e){var t=e.result;console.log("VKWebAppJoinGroup",t)}))}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"green";A||C(o.a.createElement(u.i,{duration:"7000",layout:"horizontal",onClose:function(){return C(null)},before:o.a.createElement(u.c,{size:24,style:{backgroundColor:t}},"green"===t?o.a.createElement(p.a,{fill:"#fff",width:14,height:14}):o.a.createElement(f.a,{fill:"#fff",width:14,height:14}))},e))}Object(a.useEffect)((function(){Y()}),[]);var $=function(e){c(e.currentTarget.dataset.to)};return o.a.createElement(u.j,{activePanel:n,popout:y,modal:m},o.a.createElement(P,{id:"home",fetchedUser:b,go:$,snackbar:A,openAlert:Z,openPopoutSharing:function(){d(null),w(o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{onClose:function(){return w(null)}},o.a.createElement(u.b,{autoclose:!0,onClick:function(){V<Date.now()?S("story",Z,null,Y):Z("\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0431\u043e\u043d\u0443\u0441\u043d\u0443\u044e \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u0437\u0430 \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043c\u043e\u0436\u043d\u043e \u0447\u0435\u0440\u0435\u0437 ".concat(z(V-Date.now())))}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 +1"),o.a.createElement(u.b,{autoclose:!0,onClick:function(e){B<Date.now()?S("share-wall",Z,e,Y):Z("\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0431\u043e\u043d\u0443\u0441\u043d\u0443\u044e \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u0437\u0430 \u043f\u043e\u0441\u0442 \u043c\u043e\u0436\u043d\u043e \u0447\u0435\u0440\u0435\u0437 ".concat(z(B-Date.now())))}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u0435\u043d\u0435 +1"),o.a.createElement(u.b,{autoclose:!0,onClick:q},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u0440\u0443\u043f\u043f\u0443 +1"))))},allowMessages:function e(){i.a.send("VKWebAppAllowMessagesFromGroup",{group_id:199716716}).then((function(e){console.log("res",e)})).catch((function(t){setTimeout(e,5e3),console.log("err",t)}))},attempts:W,timeToAttempt:X,getUser:Y,openModal:function(e){d(o.a.createElement(O,{setActiveModal:d,APP_AVATAR:j,getUser:Y,type:e}))}}),o.a.createElement(I,{id:"additional-attempts",fetchedUser:b,go:$,snackbar:A,openAlert:Z}),o.a.createElement(N,{id:"application-description",fetchedUser:b,go:$,snackbar:A,openAlert:Z}))};i.a.send("VKWebAppInit"),r.a.render(o.a.createElement(W,null),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.605ee756.chunk.js.map